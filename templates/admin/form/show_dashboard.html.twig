{% extends 'base.html.twig' %}

{% block body %}

	<h1 class="text-center">Tableau de bord</h1>

	{% include 'include/_flashes.html.twig' %}

	<h3 class="text-center">Tous les articles</h3>
	<div class="table">

		<thead>
			<tr>
				<th>Id</th>
				<th>Catégorie</th>
				<th>Titre</th>
				<th>Contenu</th>
				<th>Crée le</th>
				<th>Modifié le</th>
				<th>Actions</th>

			</tr>
		</thead>
		<tbody>
			{% for article in articles|reverse %}
				<tr>
					<td>{{ article.id}}</td>
					<td>{{ article.category.name }}</td>
					<td>{{ artcile.title|length > 20 ? article.title|slice(0,20) ~ '...' : article.title }}</td>
					<td>{{ article.content|length > 20 article.content|slice(0,20) ~ '...' : article.content}}</td>
					<td>{{ article.createdAt|date('d/m/Y') }}</td>
					<td>{{ article.updatedAt|date('d/m/Y')}}</td>
					<td>
						{% if article.deletedAt is null %}
							<a href="{{ path ('update_article', {'id': article.id} ) }}" class="btn btn-info">
								<i class="fa fa-edit "></i>
							</a>


							<a href="{{ path ('delete_article', {'id': article.id} ) }}" onclick="return confirm('Voulez-vous vraiment supprimer cet article ?')" class="btn btn-danger">
								<i class="fa fa-trash "></i>
							</a>
						{% else %}
							<a href="{{ path ('restore_article', {'id': article.id} ) }}" class="btn btn-outline-info">
								<i class="fa fa-trash-restore "></i>
							</a>


							<a href="{{ path ('delete_article', {'id': article.id} ) }}" onclick="return confirm('Voulez-vous vraiment supprimer définitevement  cet article de la base de donnée ?')" class="btn btn-outline-danger">
								<i class="fa fa-times-circle "></i>
							</a>

						{% endif %}

					</td>

				</tr>
			{% endfor %}
		</tbody>

	</div>

{% endblock %}
